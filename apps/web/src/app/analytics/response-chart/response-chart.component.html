<div class="chart-container" #chartContainer>
  <h3 class="chart-title" *ngIf="title">{{ title }}</h3>

  <!-- Bar Chart -->
  <div class="bar-chart" *ngIf="type === 'bar'" [style.height.px]="height">
    <div class="bar-item" *ngFor="let item of data; let i = index">
      <div class="bar-label">{{ item.label }}</div>
      <div class="bar-wrapper">
        <div
          class="bar"
          [style.width.%]="getBarWidth(item.value)"
          [style.backgroundColor]="getColor(i, item)"
        ></div>
        <span class="bar-value"
          >{{ item.value }} ({{ getPercentage(item.value) }}%)</span
        >
      </div>
    </div>
  </div>

  <!-- Pie Chart -->
  <div class="pie-chart" *ngIf="type === 'pie' || type === 'donut'">
    <div class="pie-visual" [class.donut]="type === 'donut'">
      <div
        class="pie-slice"
        *ngFor="let item of data; let i = index"
        [ngStyle]="getPieSliceStyle(i)"
      ></div>
      <div class="pie-center" *ngIf="type === 'donut'">
        <span class="pie-total">{{ total }}</span>
        <span class="pie-label">Total</span>
      </div>
    </div>
    <div class="pie-legend">
      <div class="legend-item" *ngFor="let item of data; let i = index">
        <span
          class="legend-color"
          [style.backgroundColor]="getColor(i, item)"
        ></span>
        <span class="legend-label">{{ item.label }}</span>
        <span class="legend-value"
          >{{ item.value }} ({{ getPercentage(item.value) }}%)</span
        >
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="data.length === 0">
    <mat-icon>bar_chart</mat-icon>
    <p>No data available</p>
  </div>
</div>
